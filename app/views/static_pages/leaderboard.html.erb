<% provide(:title, " | Leaderboard") %>
<h1 class="text-center">Previous Challenges and Leaderboard</h1>

<% if params.has_key?(:historic_challenge) && Challenge.exists?(id: params[:historic_challenge]) %>
<% historic_challenge =  Challenge.find(params[:historic_challenge]) %>
<% else %>
<% historic_challenge ||=  (Challenge.all.count>1 ? Challenge.all[-2] : nil) %>
<% end %>

<%= render partial: 'previous_challenge', locals: {historic_challenge: historic_challenge} %>

<%= render 'user_leaderboard' %>

<%= render 'department_leaderboard' %>

<div><%= link_to 'Back to current challenge', geek_of_the_week_home_path, :class => "btn btn-default"%></div>
